<!DOCTYPE html>
<html>

<head>
    <title>Shuffle MCQ</title>
    <link rel="stylesheet" href="style.css">
    <link rel='icon' href='favicon.ico' type='image/x-icon'/>
</head>

<body>
    <div id="left_div">
        <ul id="nav_tabs" class="header">
            <li class="active" id="input_mcq_div_nav"><a onclick="goToStep(1)">1. Input MCQ</a></li>
            <li id="ak_div_nav"><a onclick="goToStep(2)">2. Answer Key</a></li>
            <li id="output_div_nav"><a onclick="goToStep(3)">3. Output</a></li>
        </ul>
        <div id="input_mcq_div" class="step">
            <div class="settings">
                <img src="gear-solid.svg" alt="settings" class="settings_gear" onclick="toggle(sample_mcq_div); toggle(input_format);">
                <div id="sample_mcq_div"><span>
                    <label for="sample_mcq"><b>Populate text area below with</b> </label>
                    <select name="sample_mcq" id="sample_mcq" onchange="enterSampleMcq()">
                        <option value="0">no</option>
                        <option value="1">regular format</option>
                        <option value="2">irregular format</option>
                        <option value="3">incorrect format</option>
                    </select>
                    <b>sample MCQs</b>
                </span></div>
                <div id="input_format">
                    <span>
                        <b>Allowed label characters:</b>
                        <input type="text" size="6" id="label_chars" value="().">
                        (see <span onclick="toggle(user_guide, 'block', false)"><a href="#ug_label_format">User Guide</a></span>)
                    </span>
                </div>
            </div>
            <textarea id="input_mcq" rows="100" placeholder=
                "Paste your multiple-choice questions here, then click 'Parse MCQ'."
            ></textarea> 
        </div>

        <div id="ak_div" class="step">
            <div id="ak_settings" class="settings">
                <img src="gear-solid.svg" alt="settings" class="settings_gear" onclick="toggle(sample_ak_div)">
                <div id="sample_ak_div"><span>
                    <label for="sample_ak"><b>Populate text area below with</b> </label>
                    <select name="sample_ak" id="sample_ak" onchange="enterSampleAk()">
                        <option value="0">no</option>
                        <option value="1">regular format</option>
                        <option value="2">irregular format</option>
                        <option value="3">incorrect format</option>
                    </select>
                    <b>sample answer key</b>
                </span></div>
            </div>
            <textarea id="input_ak" rows="100" placeholder="Paste your answer key here, then click 'Parse Key'."></textarea>
            <div>
                <table id="parsed_ak">
                    <tr>
                        <th>q</th>
                        <th>a</th>
                        <th></th>
                    </tr>
                </table>
            </div>
        </div>

        <div id="output_div" class="step">
            <div class="settings">
                <img src="gear-solid.svg" alt="settings" class="settings_gear" id="output_settings_gear" onclick="toggle(output_format)">
                <div id="output_format">
                    <span>Question format = </span>
                    <input type="text" size="6" list="dl_before_q" id="before_q" value="" onblur="createOutput()" onfocus="clearValue('before_q')">
                    <datalist id="dl_before_q">
                        <option value="(">
                        <option value="&nbsp;">
                        <option value="<b>">
                    </datalist>
                    <span>+ Q number + </span>
                    <input type="text" size="6" list="dl_after_q" id="after_q" value=". " onblur="createOutput()" onfocus="clearValue('after_q')">
                    <datalist id="dl_after_q">
                        <option value=". ">
                        <option value=") ">
                        <option value="&nbsp;">
                        <option value="</b> ">
                    </datalist>
                    <span>+ A text</span>
                    <br><br>
                    <span>Answer format = </span>
                    <input type="text" size="6" list="dl_before_a" id="before_a" value="" onblur="createOutput()" onfocus="clearValue('before_a')">
                    <datalist id="dl_before_a">
                        <option value="(">
                        <option value="&nbsp;">
                        <option value="<span style='text-transform: lowercase;'>">
                    </datalist>
                    <span>+ A letter + </span>
                    <input type="text" size="6" list="dl_after_a" id="after_a" value=". " onblur="createOutput()" onfocus="clearValue('after_a')">
                    <datalist id="dl_after_a">
                        <option value=". ">
                        <option value=") ">
                        <option value="&nbsp;">
                        <option value="</span> ">
                    </datalist>
                    <span>+ A text</span>
                    <br><br>
                </div>
            </div>
            <p id="output"></p>
        </div>
    </div>

    <div id="middle_div">
        <button id="parse_mcq_button" onclick="parseMcq()">Parse<br>MCQ</button>
        <button id="go_to_step_2_button" onclick="goToStep(2)">Next<br>Step</button>
        <button id="parse_ak_button" onclick="parseAk()">Parse<br>Key</button>
        <button id="go_to_step_3_button" onclick="goToStep(3)">Next<br>Step</button>
        <button id="shuffle_sections_button" onclick="shuffle('sections')">Shuffle<br>Sections</button>
        <button id="shuffle_questions_button" onclick="shuffle('questions')">Shuffle<br>Questions</button>
        <button id="shuffle_answers_button" onclick="shuffle('answers')">Shuffle<br>Answers</button>
    </div>

    <div id="right_div">

        <div class="header">
            <button id="user_guide_button" onclick="toggle(user_guide)">?</button>
            <img id="youtube" src="youtube-logo.svg">
            <div id="border_mimic"></div>
        </div>

        <table id="parsed_mcq"></table>

        <div id="user_guide">
            <h1 id="ug_about"><span>About</span></h1>
                <p>ShuffleMCQ is a tool for creating multiple versions of multiple-choice-question quizzes.</p>
            <h1 id="ug_toc"><span>Table of Contents</span></h1>
                <div id="toc">
                    <ul>
                        <li><a href="#ug_vocab"><b>Vocab</b></a></li>
                        <li><a href="#ug_step_1"><b>Step 1: Enter your MCQs</b></a></li>
                            <ul>
                                <li><a href="#ug_input_mcq_format">Input MCQ Format</a></li>
                                <li><a href="#ug_question_block_format">Question Block Format</a></li>
                                <li><a href="#ug_label_format">Label Format</a></li>
                                <li><a href="#ug_validation">Validation</a></li>
                            </ul>
                        <li><a href="#ug_step_2"><b>Step 2: Enter your Answer Key</b></a></li>
                            <ul>
                                <li><a href="#ug_manual_entry">Manual Entry</a></li>
                                <li><a href="#ug_bulk_entry">Bulk Entry</a></li>
                            </ul>
                        <li><a href="#ug_step_3"><b>Step 3: Shuffle!</b></a></li>
                            <ul>
                                <li><a href="#ug_shuffle_sections">Shuffle Sections</a></li>
                                <li><a href="#ug_shuffle_questions">Shuffle Questions</a></li>
                                <li><a href="#ug_shuffle_answers">Shuffle Answers</a></li>
                                <li><a href="#ug_lock">Lock</a></li>
                                <li><a href="#ug_output">Output</a></li>
                            </ul>
                    </ul>
                </div>
            <h1 id="ug_vocab"><span>Vocab</span></h1>
                <div id="vocab_div">
                    <select name="vocab" id="vocab" onchange="highlightVocab()" size="11">
                        <option value="v_block" selected>block</option>
                        <option value="v_section_header">section header</option>
                        <option value="v_question_block">question block</option>
                        <option value="v_emptyline">emptyline</option>
                        <option value="v_section">section</option>
                        <option value="v_question">question</option>
                        <option value="v_answer">answer</option>
                        <option value="v_label">label</option>
                        <option value="v_label_space">label space</option>
                        <option value="v_linebreak">linebreak</option>
                        <option value="NONE">NONE</option>
                    </select>
                    <div class="v_mcq">
                        <div class="v_section">
                            <div class="v_block v_section_header vocab_highlight">Section header text</div><div class="v_linebreak"></div>
                            <div class="v_emptyline"><br></div><div class="v_linebreak"></div>
                            <div class="v_block v_question_block vocab_highlight">
                                <div class="v_question"><span class="v_label">1.</span><span class="v_label_space"> </span>Question text</div><div class="v_linebreak"></div>
                                <div class="v_answer"><span class="v_label">A.</span><span class="v_label_space"> </span>Answer choice text</div><div class="v_linebreak"></div>
                                <div class="v_answer"><span class="v_label">B.</span><span class="v_label_space"> </span>Answer choice text</div><div class="v_linebreak"></div>
                                <div class="v_answer"><span class="v_label">C.</span><span class="v_label_space"> </span>Answer choice text</div><div class="v_linebreak"></div>
                                <div class="v_answer"><span class="v_label">D.</span><span class="v_label_space"> </span>Answer choice text</div><div class="v_linebreak"></div>
                            </div><div class="v_linebreak"></div>
                            <div class="v_emptyline"><br></div><div class="v_linebreak"></div>
                            <div class="v_block v_question_block vocab_highlight"><div class="v_linebreak"></div>
                            <div class="v_question"><span class="v_label">2.</span><span class="v_label_space">&nbsp;&nbsp;&nbsp;</span>Question text</div><div class="v_linebreak"></div>
                            <div class="v_answer"><span class="v_label">A.</span><span class="v_label_space">&Tab;</span>Answer choice text</div><div class="v_linebreak"></div>
                                <div class="v_answer"><span class="v_label_space">&nbsp;&nbsp;&nbsp;</span><span class="v_label">B.</span><span class="v_label_space"> </span>Answer choice text</div><div class="v_linebreak"></div>
                            </div><div class="v_linebreak"></div>
                        </div><div class="v_linebreak"></div>
                        <div class="v_emptyline"><br></div><div class="v_linebreak"></div>
                        <div class="v_section"><div class="v_linebreak"></div>
                            <div class="v_block v_section_header vocab_highlight">Section header text</div><div class="v_linebreak"></div>
                            <div class="v_emptyline"><br></div><div class="v_linebreak"></div>
                            <div class="v_block v_question_block vocab_highlight"><div class="v_linebreak"></div>
                            <div class="v_question"><span class="v_label">3.</span><span class="v_label_space"> </span>Question text</div><div class="v_linebreak"></div>
                            <div class="v_answer"><span class="v_label">A.</span><span class="v_label_space"> </span>Answer choice text</div><div class="v_linebreak"></div>
                                <div class="v_answer"><span class="v_label">B.</span><span class="v_label_space"> </span>Answer choice text</div><div class="v_linebreak"></div>
                                <div class="v_answer"><span class="v_label">C.</span><span class="v_label_space"> </span>Answer choice text</div><div class="v_linebreak"></div>
                                <div class="v_answer"><span class="v_label">D.</span><span class="v_label_space"> </span>Answer choice text</div><div class="v_linebreak"></div>
                                <div class="v_answer"><span class="v_label">E.</span><span class="v_label_space"> </span>Answer choice text</div>
                            </div>
                        </div>
                    </div>
                </div>
            <h1 id="ug_step_1"><span>Step 1: Enter your MCQs</span></h1>        
                <p>Paste the entire text<sup onclick="toggle(ug_note_1)" class="asterisk">*</sup> of your quiz into the <span onclick="goToStep(1)" class="link_mimic">Input MCQ text area</span>.</p>
                <p id="ug_note_1" class="note">
                    All pasted text will become plain text. If you need to preserve some formatting, you can add it manually with HTML. To view an example, open 
                    <span onclick="goToStep(1); toggle(input_format, 'block', false); toggle(sample_mcq_div, 'block', false);"><span class="link_mimic">Input&nbsp;MCQ&nbsp;settings</span>&nbsp;<img src="gear-solid.svg" id="little_gear"></span>
                    and select <b>Populate text area below with</b> <span style="border: 1px solid black; padding: 1px; background-color: white">irregular&nbsp;format&nbsp;<sup>&#9013;</sup></span> <b>sample MCQs</b>.
                    <br> <br>If your MCQ is copied from a Google Doc, and your questions are formatted as <a href="https://support.google.com/docs/answer/3300615" target="_blank">Numbered&nbsp;list</a>&nbsp;<img src="numbered-list.png" id="numbered_list">, the question numbers will not be preserved in plain text. To fix this, download your Google Doc as a Word Doc or a PDF, then copy the MCQ from there.
                </p>
                <h2 id="ug_input_mcq_format" >Input MCQ Format</h2>                
                    <p>The text consists of section header blocks and question blocks.</p>
                    <h3 onclick="selectVocab('v_emptyline')"><a href="#ug_vocab">Emptyline</a></h3>
                        <ul>
                            <li>Each block must be separated from the next block by an emptyline.</li>
                            <li>An emptyline may include spaces or tabs, but no other text.</li>
                            <li>You can create an emptyline by pressing the <kbd>enter</kbd> or <kbd>return</kbd> key twice.</li>
                        </ul>      
                    <h3 onclick="selectVocab('v_section_header')"><a href="#ug_vocab">Section header</a></h3>
                        <ul>
                            <li>A <span onclick="selectVocab('v_section')"><a href="#ug_vocab">section</a></span> consists of one or more questions. A section header contains instructions for that set of questions.</li>
                            <li>May not begin with a number (or it could be mistaken for a question block).</li>
                            <li>If you don't have section headers, the entire input will be treated as one section.</li>
                        </ul>
                    <h3 onclick="selectVocab('v_question_block')"><a href="#ug_vocab">Question block</a></h3>
                        <ul>
                            <li>Consists of a question followed by its answer choices.</li>
                            <li>Must begin with the question number (see <a href="#ug_label_format">Label Format</a>).</li>
                            <li>
                                Emptylines are not allowed<sup onclick="toggle(ug_note_2)" class="asterisk">*</sup> in the middle of a question block.
                                <div id="ug_note_2" class="note">
                                    If you want an empty line in the middle of a question block, use HTML.
                                    <table>
                                        <tr>
                                            <th>html</th>
                                            <th>output</th>
                                        </tr>
                                        <tr>
                                            <td>line&nbsp;1&lt;br>&lt;br>line&nbsp;2</td>
                                            <td>line&nbsp;1<br><br>line&nbsp;2</td>
                                        </tr>
                                    </table>
                                                                        
                                </div>
                            </li>
                        </ul>
                <h2 id="ug_question_block_format">Question Block Format</h2>
                    <p>A <span onclick="selectVocab('v_question_block')"><a href="#ug_vocab">question block</a></span> must consist of 1 question followed by between 2 and 5 answer choices.</p>
                    <p>Each <span onclick="selectVocab('v_answer')"><a href="#ug_vocab">answer</a></span> must be separated from the preceding answer (or question) by a <span onclick="selectVocab('v_linebreak')"><a href="#ug_vocab">linebreak</a></span>. You can create a linebreak by pressing the <kbd>enter</kbd> or <kbd>return</kbd> key once.</p>
                    <p>Each answer must begin with the answer letter (see <a href="#ug_label_format">Label Format</a>).</p>
                <h2 id="ug_label_format">Label Format</h2>
                    <p>A question <span onclick="selectVocab('v_label')"><a href="#ug_vocab">label</a></span> can be any number between 0 and 999.</p>
                    <p>An answer <span onclick="selectVocab('v_label')"><a href="#ug_vocab">label</a></span> is A, B, C, D, or E (lower-case is allowed).</p>
                    <h3 onclick="selectVocab('v_label_space')"><a href="#ug_vocab">Label space</a></h3>
                        <ul>
                            <li>A space between the label and the rest of the question/answer text is required.</li>
                            <li>Spaces before the label are allowed (see <span onclick="selectVocab('v_label_space')"><a href="#ug_vocab">2.B</a></span>).</li>
                            <li>You can create a space by pressing the <kbd>spacebar</kbd> or the <kbd>tab</kbd> key.</li>
                        </ul>
                    <h3><u>Allowed label characters</u></h3>
                        <ul>
                            <li>
                                Labels may include periods or parentheses, e.g.
                                <span class="highlight">1</span><span class="highlight">0</span><span class="highlight">.</span><span class="highlight">&nbsp;</span> or
                                <span class="highlight">&nbsp;</span><span class="highlight">b</span><span class="highlight">)</span><span class="highlight">&nbsp;</span> or
                                <span class="highlight">(</span><span class="highlight">D</span><span class="highlight">.</span><span class="highlight">)</span><span class="highlight">&nbsp;</span>
                            </li>
                            <li>If your MCQ labels use different characters, configure them in the <span onclick="goToStep(1); toggle(input_format, 'block', false); toggle(sample_mcq_div, 'block', false);"><span class="link_mimic">Input&nbsp;MCQ&nbsp;settings</span>&nbsp;<img src="gear-solid.svg" id="little_gear"></span></li>
                        </ul>
                <h2 id="ug_validation">Validation</h2>
                    <p>After you input your MCQ and click <button class="middle_div_button_mimic">Parse<br>MCQ</button>, the Parsed MCQ table will appear on the right.</p>
                    <p><img src="parsed-mcq-sample.png" id="parsed_mcq_sample"></p>
                    <p>Visually scan the table to verify that it matches what you intended to enter.</p>
                    <p>If you find any errors, go back to the <span onclick="goToStep(1)" class="link_mimic">Input MCQ text area</span> to fix them, then parse the MCQ again.</p>
            <h1 id="ug_step_2"><span>Step 2: Enter your Answer Key</span></h1>
                <h2 id="ug_manual_entry">Manual Entry</h2>
                    <p>In the KEY column of the <a href="#ug_validation">Parsed MCQ table</a>, mark the checkbox next to the correct answer for each question. Multiple answers per question are allowed.</p>
                <h2 id="ug_bulk_entry">Bulk Entry</h2>
                    <p>Alternatively, you can paste your entire answer key into the <span onclick="goToStep(2)" class="link_mimic">Answer Key text area</span>.</p>
                    <p>Any format works, so long as the key contains the question number followed by its answer letter(s). Symbols other than <span class="highlight">0123456789</span> and <span class="highlight">ABCDE</span> and <span class="highlight">abcde</span> will be ignored.</p>
                    <p>Double-check the KEY column of the <a href="#ug_validation">Parsed MCQ table</a> to verify that your answer key was parsed correctly.</p>
            <h1 id="ug_step_3"><span>Step 3: Shuffle!</span></h1>
                <h2 id="ug_shuffle_sections">Shuffle Sections</h2>
                    <ul>
                        <li>Shuffle <span onclick="selectVocab('v_section')"><a href="#ug_vocab">sections</a></span> within the MCQ.</li>
                        <li>Questions will be renumbered.</li>
                        <li>Order of questions within each section will not change.</li>
                        <li>Order of answers within each question block will not change.</li>
                    </ul>
                <h2 id="ug_shuffle_questions">Shuffle Questions</h2>
                    <ul>
                        <li>Shuffle <span onclick="selectVocab('v_question_block')"><a href="#ug_vocab">question blocks</a></span> within each section.</li>
                        <li>Questions will be renumbered.</li>
                        <li>Order of sections within the MCQ will not change.</li>
                        <li>Order of answers within each question block will not change.</li>
                    </ul>
                <h2 id="ug_shuffle_answers">Shuffle Answers</h2>
                    <ul>
                        <li>Shuffle <span onclick="selectVocab('v_answer')"><a href="#ug_vocab">answers</a></span> within each question block.</li>
                        <li>Answers will be re-lettered.</li>
                        <li>Order of sections within the MCQ will not change.</li>
                        <li>Order and numbering of the questions within each section will not change.</li>
                    </ul>
                <h2 id="ug_lock">Lock</h2>
                    <p>Use the checkbox in the LOCK column of the <a href="#ug_validation">Parsed MCQ table</a> to lock a section/question/answer in place while the rest of the MCQ is being shuffled.</p>
                    <p>For example, you may want to lock "E. All of the above" as the last answer choice.</p>
                <h2 id="ug_output">Output</h2>
                    <p>The updated answer key will be at the bottom of the <span onclick="goToStep(3); createOutput();" class="link_mimic">Output</span>.</p>
                    <p>Click <button>Copy Output</button> and paste your shuffled MCQ back to your computer.</p>
                    <p>Default label format is <span class="highlight">1</span><span class="highlight">2</span><span class="highlight">3</span><span class="highlight">.</span><span class="highlight">&nbsp;</span></p>
                    <p>To change it, open the <span onclick="goToStep(3); toggle(output_format, 'block', false);"><span class="link_mimic">Output&nbsp;settings</span>&nbsp;<img src="gear-solid.svg" id="little_gear"></span> and type in your own format or select an option from the dropdown.</p>
            <h1 id="ug_contact"><span>Contact</span></h1>
            <p>If you have any questions about how to use this website, found any bugs, or need me to customize the website to better fit the format of your quizzes, please email me at ShuffleMCQ@gmail.com</p>
        </div>
    </div>
</body>

<script src="script.js"></script>

</html>
